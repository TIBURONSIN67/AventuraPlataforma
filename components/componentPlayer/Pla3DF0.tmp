[gd_scene load_steps=24 format=3 uid="uid://c8mvix6qkkkkt"]

[ext_resource type="Script" path="res://scripts/player.gd" id="1_1ak1w"]
[ext_resource type="ArrayMesh" uid="uid://deu06eho4c74" path="res://mesh/dust.res" id="1_uk2bs"]
[ext_resource type="PackedScene" uid="uid://bt3h8ko2uw7ak" path="res://models/ModelsCharacters/GLB format/character-male-c.glb" id="3_kdbcn"]
[ext_resource type="PackedScene" uid="uid://b4nmjbg5gvqt2" path="res://models/World/ptototype1/tool-axe.glb" id="4_8m5h7"]
[ext_resource type="PackedScene" uid="uid://drj8yyl38l8co" path="res://scenes/viewScene/view_tp.tscn" id="5_1xdjl"]
[ext_resource type="Script" path="res://scripts/view.gd" id="6_q3oss"]
[ext_resource type="PackedScene" uid="uid://cq2f4ipfimg0h" path="res://scenes/UI/gui_player.tscn" id="8_65a8g"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_q7stj"]
diffuse_mode = 2
specular_mode = 2
metallic_specular = 0.0
backlight = Color(0, 0.521569, 0.709804, 1)
billboard_keep_scale = true
grow_amount = 1.882
proximity_fade_distance = 0.25

[sub_resource type="Curve" id="Curve_xh1e2"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.249284, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="BoxShape3D" id="BoxShape3D_kge75"]
size = Vector3(0.349388, 0.802253, 0.270853)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4i530"]
animation = &"walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_negte"]
animation = &"jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_227nb"]
animation = &"fall"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_f44rd"]
animation = &"attack-melee-right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_spbgv"]
animation = &"idle"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_6gurf"]
filter_enabled = true
filters = ["character-male-c/Skeleton3D:arm-left", "character-male-c/Skeleton3D:arm-right", "character-male-c/Skeleton3D:head", "character-male-c/Skeleton3D:root", "character-male-c/Skeleton3D:torso"]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_ijw8l"]

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_keo6w"]
input_0/name = "Idle"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "Walk"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true
input_2/name = "Jump"
input_2/auto_advance = false
input_2/break_loop_at_end = false
input_2/reset = true
input_3/name = "Fall"
input_3/auto_advance = false
input_3/break_loop_at_end = false
input_3/reset = true

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_v80rv"]
graph_offset = Vector2(-29, 132)
nodes/Animation/node = SubResource("AnimationNodeAnimation_spbgv")
nodes/Animation/position = Vector2(0, 0)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_4i530")
"nodes/Animation 2/position" = Vector2(-96, 160)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_negte")
"nodes/Animation 3/position" = Vector2(-80, 304)
"nodes/Animation 4/node" = SubResource("AnimationNodeAnimation_227nb")
"nodes/Animation 4/position" = Vector2(-96, 448)
"nodes/Animation 5/node" = SubResource("AnimationNodeAnimation_f44rd")
"nodes/Animation 5/position" = Vector2(304, 464)
nodes/Mele/node = SubResource("AnimationNodeOneShot_6gurf")
nodes/Mele/position = Vector2(544, 240)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_ijw8l")
nodes/TimeScale/position = Vector2(64, 144)
nodes/Transition/node = SubResource("AnimationNodeTransition_keo6w")
nodes/Transition/position = Vector2(304, 208)
nodes/output/position = Vector2(752, 288)
node_connections = [&"Mele", 0, &"Transition", &"Mele", 1, &"Animation 5", &"TimeScale", 0, &"Animation 2", &"Transition", 0, &"Animation", &"Transition", 1, &"TimeScale", &"Transition", 2, &"Animation 3", &"Transition", 3, &"Animation 4", &"output", 0, &"Mele"]

[sub_resource type="Animation" id="Animation_g3ap5"]
resource_name = "Atack"
length = 0.416
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("HitArea/CollisionShape3D:disabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [true, false, true]
}

[sub_resource type="Animation" id="Animation_pkrus"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("HitArea/CollisionShape3D:disabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_hslp6"]
_data = {
"Atack": SubResource("Animation_g3ap5"),
"RESET": SubResource("Animation_pkrus")
}

[sub_resource type="SphereShape3D" id="SphereShape3D_idxqc"]
radius = 0.294672

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("view", "camera")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
collision_layer = 2
collision_mask = 5
script = ExtResource("1_1ak1w")
view = NodePath("ViewTp")
camera = NodePath("ViewTp/SpringArm3D/Camera")

[node name="ParticlesTrail" type="CPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.507354, 0)
material_override = SubResource("StandardMaterial3D_q7stj")
cast_shadow = 0
emitting = false
amount = 60
mesh = ExtResource("1_uk2bs")
emission_shape = 1
emission_sphere_radius = 0.3
particle_flag_align_y = true
direction = Vector3(0, 0, 0)
gravity = Vector3(0, 0.1, 0)
scale_amount_min = 0.75
scale_amount_curve = SubResource("Curve_xh1e2")

[node name="StandingShape" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00347519, -0.0838012, -0.014513)
shape = SubResource("BoxShape3D_kge75")

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Character")
tree_root = SubResource("AnimationNodeBlendTree_v80rv")
anim_player = NodePath("../Character/AnimationPlayer")
parameters/Mele/active = false
parameters/Mele/internal_active = false
parameters/Mele/request = 0
parameters/TimeScale/scale = 1.5
parameters/Transition/current_state = "Idle"
parameters/Transition/transition_request = ""
parameters/Transition/current_index = 0

[node name="Character" parent="." instance=ExtResource("3_kdbcn")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.501087, 0)

[node name="Skeleton3D" parent="Character/character-male-c" index="0"]
bones/3/rotation = Quaternion(-0.0385927, 0, 0, 0.999255)
bones/4/rotation = Quaternion(0, 0, -0.279478, 0.960152)
bones/5/rotation = Quaternion(0, 0, 0.279478, 0.960152)
bones/6/rotation = Quaternion(0, 0.0385927, 0, 0.999255)

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="Character/character-male-c/Skeleton3D" index="2"]
transform = Transform3D(0.843784, -0.536683, 0, 0.535084, 0.841271, 0.0771279, -0.0413932, -0.0650793, 0.997021, -0.0998968, 0.288305, -0.025884)
bone_name = "arm-right"
bone_idx = 5

[node name="tool-axe2" parent="Character/character-male-c/Skeleton3D/BoneAttachment3D" instance=ExtResource("4_8m5h7")]
transform = Transform3D(0.808824, 0.541761, 1.74708, 1.63308, 0.646582, -0.956546, -0.823926, 1.8134, -0.180884, -0.222192, -0.0371192, 0.0399641)

[node name="ViewTp" parent="." node_paths=PackedStringArray("target") instance=ExtResource("5_1xdjl")]
top_level = true
script = ExtResource("6_q3oss")
target = NodePath("..")

[node name="audio" type="AudioStreamPlayer3D" parent="."]
volume_db = 10.0
autoplay = true

[node name="GUI_player" parent="." instance=ExtResource("8_65a8g")]
visible = false

[node name="CustomTracks" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_hslp6")
}

[node name="HitArea" type="Area3D" parent="."]
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="HitArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0150688, -0.233563, 0.307945)
shape = SubResource("SphereShape3D_idxqc")
disabled = true

[connection signal="body_entered" from="HitArea" to="HitArea" method="_on_body_entered"]

[editable path="Character"]
[editable path="ViewTp"]
[editable path="GUI_player"]
